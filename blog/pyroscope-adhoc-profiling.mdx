---
title: Introducing Pyroscope adhoc profiling
sidebar_label: Introducing Pyroscope adhoc profiling
slug: /pyroscope-adhoc-profiling
date: "2021-01-26"
---

# Introducing Pyroscope Adhoc Profiling!

With the recent popularity of *continuous profiling* it may seem as though profiling is a new technology in the observability world. In actuality, profiling has been around for *decades* and larger  companies like Google, Netflix, and Facebook have even been using continuous profiling in some form for over a decade. 

With companies like these using continuous profiling, clearly it has a lot of potential value. When we created Pyroscope, we did so with the intention to bring the same cost savings and debugging capabilities to *all* companies through making Pyroscope an open source continuous profiling solution.

If we were building everything from scratch this would be very unfeasible to do. However, our goal was, and still is, to make Pyroscope a one-stop shop for profiling. And thanks to the open source contributions from hundreds of contributors of the projects that Pyroscope relies on we now support continuous profiling the following languages:

- Go
- Python
- ruby
- eBPF
- .NET
- Java
- Php
- Rust

Like any good open source project we built on the many open source profilers that came before us and so this would not have been possible without the hard work of :

- Brendan Gregg — inventor of Flame Graphs
- Julia Evans — creator of rbspy — sampling profiler for Ruby
- Vladimir Agafonkin — creator of flamebearer — fast flamegraph renderer
- Ben Frederickson — creator of py-spy — sampling profiler for Python
- Adam Saponara — creator of phpspy — sampling profiler for PHP
- Alexei Starovoitov, Brendan Gregg, and many others who made BPF based profiling in Linux kernel possible
- and many more

### Continuous vs Adhoc Profiling

Typically, the profilers mentioned above have been built for more static or adhoc analysis (i.e. profiling a script) as opposed to Pyroscope’s version which added the dimension of time which allows people to do a more continuous analysis (i.e. profiling a server). 

Over time as we continued to improve on the UI/UX of Pyroscope and [dogfooding our own product](link) we started to realize that there are a lot of situations where its actually ideal to use profiling in this static manner. 

Again our goal is to make Pyroscope a one-stop-shop for *all* profiling needs... And that means supporting all languages, continuously profiling a servers, quickly profiling an adhoc script, etc. 

### Introducing Adhoc profiling

That being said, we are excited to officially release Adhoc profiling mode for Pyroscope! With this mode you get all the convenience and simplicity of profiling a script and also get the visualization/UI functionality that we’ve built out over the past year

### Exporting interactive Flamegraph from Pyroscope Adhoc mode

For serverless adhoc mode, you can use a Pyroscope command to profile a script and export an HTML file which contains an interactive profile that you can view, play with, and share with your team. 

For example, in Go to run this you simply type:

```yaml
pyroscope adhoc main.go --format html
```

This will profile the file passed in and product and export an html file which looks like this:

[ Picture ] (can we do an iframe?)

This is the simplest way to use Pyroscope adhoc mode and is great for quickly viewing and sharing profiles. However, one of the benefits of running a Pyroscope server is that it also has a built in database that allows you to store these exported flamegraphs and revisit them later.

### Using Pyroscope Server to Analyze Adhoc Flamegraphs

### Viewing external existing profiles (i.e. pprof)

If you’ve using profiling before, no matter what tool you were using you likely have some stray (i.e. pprof) files floating around. Pyroscope adhoc mode allows you to both view and store those profiles in a centralized place so you can analyze and compare them to future profiles! 

Simply choose the “upload” tab and either select or drag and drop a profile [supported formats](documentation for adhoc) onto the page.

[ Gif of Drag and drop ]

### Viewing profiles generated by `Pyroscope Adhoc` Command

When you run `pyroscope adhoc` it actually exports two copies of the exported flamegraph. One exports to the location where you ran `pyroscope adhoc` in the specified format (default html) and the other is stored in the Pyroscope data directory on your machine at `~/.pyroscope` . 

This is so that when you run the Pyroscope server it can actually retrieve all of the profiles that you’ve created in the past. 

Just go to the adhoc page and under the “Pyroscope data” tab you will be able to see past profiles generated via the `pyroscope adhoc` command

### Viewing Flamgraph diffs between two adhoc profiles

Similar to how we have diff view for continuous profiling. Adhoc also supports calculating the diff between two Flamegraphs. 

For now this functionality requires server-side code so it is only available for files saved inthe `~/.pyroscope` directory. However, we plan to improve on this over time (or potentially even compile these functions to [WASM](link to issue) — but thats another post for a nother time).

[ show gif calculating diff ]
